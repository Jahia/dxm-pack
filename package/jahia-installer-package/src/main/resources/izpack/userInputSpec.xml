<?xml version="1.0" encoding="UTF-8"?>
<userInput>
    <panel order="0">
        <field type="title" txt="Installation type" id="installation.title"/>
        
        <field type="staticText" align="left"
               txt="Here you can choose your preferred installation type."
               id="installation.type1"/>
        
        <field type="staticText" align="left"
               txt="Express installation completes the common Jahia setup using pre-packaged Apache Tomcat 6.0 server and embedded Sun Java DB / Apache Derby DBMS, whereas the Custom install allows advanced configuration of the target application server, DBMS and addition options:"
               id="installation.type2"/>
        
        <field type="space" />
        
        <field type="radio" variable="installation.type" align="left">
            <spec>
                <choice txt="Express install" id="installation.type.express" value="express" set="true"/>
                <choice txt="Custom install (advanced)" id="installation.type.advanced" value="advanced"/>
            </spec>
        </field>
        
    </panel>
    
    <panel order="1" topBuffer="0">
        <field type="title" txt="Database connection settings" id="dbSettings.title"/>
        <field type="space" />
        <field type="radio" variable="dbSettings.mode">
            <description align="left" txt="Choose your preferred database connection type" id="dbSettings.chooseMode"/>
            <spec>
                <choice txt="Use a standalone DBMS" id="dbSettings.mode.standalone" value="standalone" set="true"/>
                <choice txt="Use an embedded Sun Java DB / Apache Derby database engine" id="dbSettings.mode.embedded" value="embedded"/>
            </spec>
        </field>
    </panel>
    
    <panel order="2" topBuffer="0">
        <field type="title" txt="Database connection settings" id="dbSettings.title"/>
        <field type="space" />
        <field type="radio" variable="dbSettings.dbms.type" align="left" conditionid="cnd.db.mode.standalone">
            <description align="left" txt="Choose your DBMS type" id="dbSettings.dbms.type"/>
            <spec>
                <choice txt="MySQL 5.x" id="dbSettings.dbms.type.mysql" value="mysql" set="true"/>
                <choice txt="PostgreSQL 8.x" id="dbSettings.dbms.type.postgresql" value="postgresql"/>
                <choice txt="Sun Java DB / Apache Derby (standalone)" id="dbSettings.dbms.type.derby" value="derby"/>
            </spec>
        </field>
    </panel>
    
    <panel order="3">
        <field type="title" txt="Database connection settings" id="dbSettings.dbms.title"/>
        <!-- DB driver and URL fields are for each DB type due to value initialization problem (if the DB type is changed) -->

        <!-- MySQL -->
        <field type="text" align="left" variable="dbSettings.connection.driver.mysql" conditionid="cnd.db.dbms.mysql">
            <spec txt="Database driver (*)" id="dbSettings.connection.driver" size="25" set="${def.db.driver.mysql}"/>
            <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Database driver is a mandatory field" id="dbSettings.connection.driver.mandatory"/>
        </field>
        <field type="text" align="left" variable="dbSettings.connection.url.mysql" conditionid="cnd.db.dbms.mysql">
            <spec txt="Database URL (*)" id="dbSettings.connection.url" size="25" set="${def.db.url.mysql}"/>
            <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Database URL is a mandatory field" id="dbSettings.connection.url.mandatory"/>
        </field>
        

        <!-- PostgreSQL -->
        <field type="text" align="left" variable="dbSettings.connection.driver.postgresql" conditionid="cnd.db.dbms.postgresql">
            <spec txt="Database driver (*)" id="dbSettings.connection.driver" size="25" set="${def.db.driver.postgresql}"/>
            <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Database driver is a mandatory field" id="dbSettings.connection.driver.mandatory"/>
        </field>
        <field type="text" align="left" variable="dbSettings.connection.url.postgresql" conditionid="cnd.db.dbms.postgresql">
            <spec txt="Database URL (*)" id="dbSettings.connection.url" size="25" set="${def.db.url.postgresql}"/>
            <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Database URL is a mandatory field" id="dbSettings.connection.url.mandatory"/>
        </field>
        
        <!-- Derby -->
        <field type="text" align="left" variable="dbSettings.connection.driver.derby" conditionid="cnd.db.dbms.derby">
            <spec txt="Database driver (*)" id="dbSettings.connection.driver" size="25" set="${def.db.driver.derby}"/>
            <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Database driver is a mandatory field" id="dbSettings.connection.driver.mandatory"/>
        </field>
        <field type="text" align="left" variable="dbSettings.connection.url.derby" conditionid="cnd.db.dbms.derby">
            <spec txt="Database URL (*)" id="dbSettings.connection.url" size="25" set="${def.db.url.derby}"/>
            <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Database URL is a mandatory field" id="dbSettings.connection.url.mandatory"/>
        </field>
        <field type="text" align="left" variable="dbSettings.connection.username">
            <spec txt="Database username" id="dbSettings.connection.username" size="20" set="jahia"/>
        </field>
        <field type="password" align="left" variable="dbSettings.connection.password">
            <spec>
                <pwd set="jahia" size="20" txt="Database password" id="dbSettings.connection.password"/>
            </spec>
        </field>
        <field type="space"/>
        <field type="check" variable="dbSettings.dbms.storeFilesInDB" align="left">
            <spec txt="Store binary data in the database?" id="dbSettings.dbms.storeFilesInDB" true="true" false="false" set="false"/>
        </field>
        <field type="space"/>
        <field type="check" variable="dbSettings.dbms.createTables" align="left">
            <spec txt="Create required database tables?" id="dbSettings.dbms.createTables" true="true" false="false" set="true"/>
        </field>
    </panel>
    
    <panel order="4">
        <field type="title" txt="Application and server settings" id="appServer.title"/>
        <field type="staticText" align="left" id="appServer.tomcat.description" txt="Apache Tomcat configuration" conditionid="cnd.pack.tomcat"/>
        <field type="divider" align="top" conditionid="cnd.pack.tomcat"/>
        <field type="text" align="left" variable="tomcat.httpPort" conditionid="cnd.pack.tomcat">
            <spec txt="HTTP connector port (*)" id="appServer.httpPort" size="4" set="8080"/>
            <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="HTTP connector port is a mandatory field and should contain a valid TCP port number" id="appServer.httpPort.validator">
                <param name="pattern" value="[0-9]{2,5}"/>
            </validator>
        </field>
        <field type="text" align="left" variable="tomcat.sslPort" conditionid="cnd.pack.tomcat">
            <spec txt="HTTPS redirect port (*)" id="appServer.sslPort" size="4" set="8443"/>
            <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="HTTPS redirect port is a mandatory field and should contain a valid TCP port number" id="appServer.sslPort.validator">
                <param name="pattern" value="[0-9]{2,5}"/>
            </validator>
        </field>
        <field type="text" align="left" variable="tomcat.ajpPort" conditionid="cnd.pack.tomcat">
            <spec txt="AJP connector port (*)" id="appServer.ajpPort" size="4" set="8009"/>
            <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="AJP connector port is a mandatory field and should contain a valid TCP port number" id="appServer.ajpPort.validator">
                <param name="pattern" value="[0-9]{2,5}"/>
            </validator>
        </field>
        <field type="text" align="left" variable="tomcat.serverPort" conditionid="cnd.pack.tomcat">
            <spec txt="Server shutdown port (*)" id="appServer.serverPort" size="4" set="8005"/>
            <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="Server shutdown port is a mandatory field and should contain a valid TCP port number" id="appServer.serverPort.validator">
                <param name="pattern" value="[0-9]{2,5}"/>
            </validator>
        </field>
        <field type="space" conditionid="cnd.pack.tomcat"/>
        <field type="staticText" align="left" id="appServer.webApp.description" txt="Web application settings"/>
        <field type="divider" align="top"/>
        <field type="text" align="left" variable="jahia.war.contextName">
            <spec txt="Context name (context path without /)" id="appServer.contextName" size="10" set=""/>
            <validator class="com.izforge.izpack.util.RegularExpressionValidator" txt="The Web application context name should be a valid alpha-numeric no whitespace text, omitting the leading /" id="appServer.contextName.validator">
                <param name="pattern" value="[a-zA-Z0-9_-]{0,}"/>
            </validator>
        </field>
        <field type="space"/>
        <field type="text" align="left" variable="jahiaManager.username">
            <spec txt="Jahia tool manager username (*)" id="appServer.username" size="10" set="jahia"/>
            <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Jahia tool manager username is a mandatory field" id="appServer.username.mandatory"/>
        </field>
        <field type="password" align="left" variable="jahiaManager.password">
            <spec>
                <pwd set="password" size="10" txt="Jahia tool manager password (*)" id="appServer.password"/>
            </spec>
            <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Jahia tool manager password is a mandatory field" id="appServer.password.mandatory"/>
        </field>
        <field type="check" variable="developmentMode" align="left">
            <spec txt="Use development mode for templates?" id="appServer.developmentMode" true="true" false="false" set="true"/>
        </field>
        <field type="space"/>
        <field type="divider" align="bottom"/>
        <field type="staticText" align="left" txt="(*) - this field is required" id="common.requiredFieldHint"/>
    </panel>
    
    <panel order="5">
        <field type="title" txt="System administrator (root) settings" id="superUser.title"/>
        <!-- Allow changing the root username when we will support it
        <field type="text" align="left" variable="superUser.username">
            <spec txt="Username" id="superUser.username" size="15" set="root"/>
            <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Administrator username is a mandatory field" id="superUser.username.mandatory"/>
        </field>
         -->
        <field type="staticText" align="left" id="superUser.username" txt="Username: root"/>
        <field type="password" align="left" variable="superUser.password">
            <spec>
                <pwd set="" size="15" txt="Password (*)" id="superUser.password"/>
                <pwd set="" size="15" txt="Password confirmation (*)" id="superUser.passwordConfirm"/>
            </spec>
            <validator class="com.izforge.izpack.util.NotEmptyValidator" txt="Administrator password is a mandatory field" id="superUser.password.mandatory"/>
            <validator
                class="com.izforge.izpack.util.PasswordEqualityValidator" txt="Both passwords must match" id="superUser.password.match"/>
        </field>
        <field type="text" align="left" variable="superUser.firstname" conditionid="cnd.installation.type.advanced">
            <spec txt="First name" id="superUser.firstname" size="15" set=""/>
        </field>
        <field type="text" align="left" variable="superUser.lastname" conditionid="cnd.installation.type.advanced">
            <spec txt="Last name" id="superUser.lastname" size="15" set=""/>
        </field>
        <field type="text" align="left" variable="superUser.email" conditionid="cnd.installation.type.advanced">
            <spec txt="E-mail" id="superUser.email" size="15" set=""/>
        </field>
        <field type="space"/>
        <field type="space"/>
        <field type="space"/>
        <field type="divider" align="bottom"/>
        <field type="staticText" align="left" txt="(*) - this field is required" id="common.requiredFieldHint"/>
    </panel>
    
    <panel order="6">
        <field type="title" txt="Mail settings (optional)" id="mailSettings.title"/>
        <field type="staticText" txt="The settings below are optional. Leave them empty to disable E-Mail notification. Specifying them will enable the E-Mail notification feature." id="mailSettings.description"/>
        <field type="space"/>
        <field type="text" align="left" variable="mailSettings.server">
            <spec txt="Mail server" id="mailSettings.server" size="20"/>
        </field>
        <field type="text" align="left" variable="mailSettings.administrator">
            <spec txt="Mail administrator - recipient" id="mailSettings.administrator" size="20"/>
        </field>
        <field type="text" align="left" variable="mailSettings.from">
            <spec txt="Mail from - sender" id="mailSettings.from" size="20"/>
        </field>
        <field type="space"/>
        <field type="staticText" txt="See http://jira.jahia.org/browse/JKB-20 for Mail server configuration options in Jahia 6.5" id="mailSettings.link" align="right"/>
    </panel>

    <panel order="7">
        <field type="title" txt="Installation" id="afterInstall.title"/>
        <field type="staticText" txt="Installation successful" id="afterInstall.description"/>
        <field type="check" variable="afterInstall.viewHowToInstall" align="left" conditionid="!cnd.pack.tomcat">
            <spec txt="Open How To Install file" id="afterInstall.viewHowToInstall" true="true" false="false" set="true"/>
        </field>
        <field type="check" variable="afterInstall.viewReadme" align="left" conditionid="cnd.pack.tomcat">
            <spec txt="Open README file" id="afterInstall.viewReadme" true="true" false="false" set="true"/>
        </field>
        <field type="check" variable="afterInstall.startTomcat" align="left" conditionid="cnd.pack.tomcat">
            <spec txt="Start Apache Tomcat server" id="afterInstall.startTomcat" true="true" false="false" set="true"/>
        </field>
        <field type="check" variable="afterInstall.launchJahia" align="left" conditionid="cnd.pack.tomcat">
            <spec txt="Wait for server startup and launch Jahia" id="afterInstall.launchJahia" true="true" false="false" set="false"/>
        </field>
    </panel>
</userInput>